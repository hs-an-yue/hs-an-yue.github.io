<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Centos7上安装Docker容器以及Dockerhub不能访问的解决方案</title>
    <url>/2024/08/03/Centos7%E4%B8%8A%E5%AE%89%E8%A3%85Docker%E5%AE%B9%E5%99%A8%E4%BB%A5%E5%8F%8ADockerhub%E4%B8%8D%E8%83%BD%E8%AE%BF%E9%97%AE%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<figure class="highlight nestedtext"><table><tr><td class="code"><pre><span class="line"><span class="attribute">作者</span><span class="punctuation">:</span> <span class="string">夜泊1990</span></span><br><span class="line"><span class="attribute">企鹅</span><span class="punctuation">:</span> <span class="string">1611756908</span></span><br><span class="line"><span class="attribute">鹅群</span><span class="punctuation">:</span> <span class="string">948233848</span></span><br><span class="line"><span class="attribute">邮箱</span><span class="punctuation">:</span> <span class="string">hd1611756908@163.com</span></span><br><span class="line"><span class="attribute">博客</span><span class="punctuation">:</span> <span class="string">https://hs-an-yue.github.io/</span></span><br><span class="line"><span class="attribute">B 站</span><span class="punctuation">:</span> <span class="string">https://space.bilibili.com/514155929/</span></span><br></pre></td></tr></table></figure>

<h2 id="第一章-Docker介绍"><a href="#第一章-Docker介绍" class="headerlink" title="第一章 Docker介绍"></a>第一章 Docker介绍</h2><figure class="highlight erlang"><table><tr><td class="code"><pre><span class="line">Docker 是一个开源的应用容器引擎</span><br><span class="line">Docker 将应用程序与该程序的依赖,打包在一个文件里面。运行这个文件,就会生成一个虚拟容器.程序在这个虚拟容器里运行,就好像在真实的物理机上运行一样,并且开销很低.</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="第二章-Docker安装"><a href="#第二章-Docker安装" class="headerlink" title="第二章 Docker安装"></a>第二章 Docker安装</h2><figure class="highlight nestedtext"><table><tr><td class="code"><pre><span class="line"><span class="attribute">这里演示在Centos7.x上安装Docker</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">第一步</span><span class="punctuation">:</span> <span class="string">Linux内核升级,Linux内核版本需要大于3.10版本</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">: </span></span><br><span class="line">		<span class="attribute">1. 查看内核     uname -r</span></span><br><span class="line"><span class="attribute">		2. 内核升级     yum install -y kernel</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">第二步</span><span class="punctuation">:</span> <span class="string">安装 gcc和gcc-c++编译器,如果本机中存在可以不装</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span></span><br><span class="line">		<span class="attribute">1. 安装gcc      yum -y install gcc</span></span><br><span class="line"><span class="attribute">		2. 安装gcc-c++  yum -y install gcc-c++</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">第三步</span><span class="punctuation">:</span> <span class="string">卸载旧版本的docker</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span></span><br><span class="line">		<span class="attribute">yum remove docker \</span></span><br><span class="line"><span class="attribute">                  docker-client \</span></span><br><span class="line"><span class="attribute">                  docker-client-latest \</span></span><br><span class="line"><span class="attribute">                  docker-common \</span></span><br><span class="line"><span class="attribute">                  docker-latest \</span></span><br><span class="line"><span class="attribute">                  docker-latest-logrotate \</span></span><br><span class="line"><span class="attribute">                  docker-logrotate \</span></span><br><span class="line"><span class="attribute">                  docker-engine</span></span><br><span class="line"><span class="attribute"> </span></span><br><span class="line"><span class="attribute">第四步</span><span class="punctuation">:</span> <span class="string">安装相关依赖包</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span></span><br><span class="line">		<span class="attribute">yum install -y yum-utils device-mapper-persistent-data lvm2</span></span><br><span class="line"><span class="attribute">		</span></span><br><span class="line"><span class="attribute">第五步</span><span class="punctuation">:</span> <span class="string">设置stable镜像仓库(阿里云镜像仓库)</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span></span><br><span class="line">		yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line"></span><br><span class="line"><span class="attribute">第六步</span><span class="punctuation">:</span> <span class="string">更新yum软件包索引</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span></span><br><span class="line">		<span class="attribute">yum makecache fast</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">第七步</span><span class="punctuation">:</span> <span class="string">搜索当前的Docker版本,版本由高到低排列</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span></span><br><span class="line">		yum list docker-ce.x86_64  --showduplicates | sort -r</span><br><span class="line">	</span><br><span class="line">	搜索结果展示(部分)</span><br><span class="line">		docker-ce.x86_64            3:26.1.4-1.el7                      docker-ce-stable</span><br><span class="line">        docker-ce.x86_64            3:26.1.3-1.el7                      docker-ce-stable</span><br><span class="line">        docker-ce.x86_64            3:26.1.2-1.el7                      docker-ce-stable</span><br><span class="line">        docker-ce.x86_64            3:26.1.1-1.el7                      docker-ce-stable</span><br><span class="line">        docker-ce.x86_64            3:26.1.0-1.el7                      docker-ce-stable</span><br><span class="line">        docker-ce.x86_64            3:26.0.2-1.el7                      docker-ce-stable</span><br><span class="line">        docker-ce.x86_64            3:26.0.1-1.el7                      docker-ce-stable</span><br><span class="line"></span><br><span class="line"><span class="attribute">第八步</span><span class="punctuation">:</span> <span class="string">安装指定版本的Docker</span></span><br><span class="line">	<span class="attribute">命令格式</span><span class="punctuation">: </span></span><br><span class="line">		<span class="attribute">yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io</span></span><br><span class="line"><span class="attribute">		</span></span><br><span class="line"><span class="attribute">		VERSION_STRING</span><span class="punctuation">:</span> <span class="string">版本查看上面的搜索结果</span></span><br><span class="line">		版本号截取方式在第二列中从冒号(:)开始,短横线(-)结束中间的那段为版本(例如 3:20.10.2-3.el7 的版本为 20.10.2)替换&lt;VERSION_STRING&gt;即可</span><br><span class="line">		</span><br><span class="line">	<span class="attribute">安装Docker26.1.4版本命令如下</span><span class="punctuation">:</span></span><br><span class="line">    	<span class="attribute">yum install docker-ce-26.1.4 docker-ce-cli-26.1.4</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">第九步</span><span class="punctuation">:</span> <span class="string">安装完成启动</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">: </span></span><br><span class="line">		<span class="attribute">1. 启动Docker    		   systemctl start docker</span></span><br><span class="line"><span class="attribute">		2. 查看Docker是否正常运行  ps -ef | grep docker</span></span><br><span class="line"><span class="attribute">		</span></span><br><span class="line"><span class="attribute">第十步</span><span class="punctuation">:</span> <span class="string">测试是否安装成功(运行hello-world镜像测试)</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span> <span class="string">docker run hello-world</span></span><br><span class="line">	</span><br><span class="line">	<span class="attribute">报错信息</span><span class="punctuation">:</span></span><br><span class="line">	[root@192 ~]# docker run hello-world</span><br><span class="line">        Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">        <span class="attribute">latest</span><span class="punctuation">:</span> <span class="string">Pulling from library/hello-world</span></span><br><span class="line">        <span class="attribute">c1ec31eb5944</span><span class="punctuation">:</span> <span class="string">Retrying in 1 second </span></span><br><span class="line">        <span class="attribute">docker</span><span class="punctuation">:</span> <span class="string">error pulling image configuration: download failed after attempts=6: dial tcp 128.242.240.85:443: connect: connection refused.</span></span><br><span class="line">        <span class="attribute">See &#x27;docker run --help&#x27;.</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">	报错原因</span><span class="punctuation">:</span> <span class="string">因为 DockerHub 不能在国内使用,所以运行hello-world时,不能从DockerHub上下载镜像,所以失败</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">第十一步</span><span class="punctuation">:</span> <span class="string">解决 DockerHub 镜像站不能访问的问题</span></span><br><span class="line"></span><br><span class="line">	<span class="attribute">解决方案</span><span class="punctuation">:</span> <span class="string">国内有能够替代DockerHub的镜像站</span></span><br><span class="line">		<span class="attribute">例如</span><span class="punctuation">:</span> <span class="string">百度镜像站,南京大学镜像站等,可以替换默认的DockerHub镜像站</span></span><br><span class="line">			<span class="attribute">1. 百度镜像地址</span><span class="punctuation">:</span> <span class="string">    https://mirror.baidubce.com</span></span><br><span class="line">			<span class="attribute">2. 南京大学镜像地址</span><span class="punctuation">:</span> <span class="string"> https://docker.nju.edu.cn</span></span><br><span class="line">			</span><br><span class="line">	<span class="attribute">替换方式</span><span class="punctuation">:</span></span><br><span class="line">		<span class="attribute">第1步</span><span class="punctuation">:</span> <span class="string">进入 cd /etc/docker/ 目录下查看是否有daemon.json文件,如果没有就自己手动创建一个</span></span><br><span class="line">		<span class="attribute">第2步</span><span class="punctuation">:</span> <span class="string">如果存在daemon.json文件将下面的信息保存到daemon.json中</span></span><br><span class="line">        <span class="attribute">&#123;</span></span><br><span class="line"><span class="attribute">            &quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="string">[</span></span><br><span class="line">				&quot;https://dockerhub.timeweb.cloud&quot;,</span><br><span class="line">				&quot;https://docker.m.daocloud.io&quot;,</span><br><span class="line">				&quot;https://noohub.ru&quot;,</span><br><span class="line">				&quot;https://docker.agsv.top&quot;,</span><br><span class="line">				&quot;https://hub.iyuu.cn&quot;,</span><br><span class="line">				&quot;https://docker.shootchat.top&quot;,</span><br><span class="line">				&quot;https://do.nark.eu.org&quot;,</span><br><span class="line">				&quot;https://docker.m.daocloud.io&quot;</span><br><span class="line">            <span class="attribute">]</span></span><br><span class="line"><span class="attribute">        &#125;</span></span><br><span class="line"><span class="attribute">        第3步</span><span class="punctuation">:</span> <span class="string">重启docker 命令: systemctl restart docker</span></span><br><span class="line">        </span><br><span class="line">        <span class="attribute">第4步</span><span class="punctuation">:</span> <span class="string">重启后继续执行 docker run hello-world 命令测试镜像地址是否成功</span></span><br><span class="line">        	如果出现以下日志表示成功</span><br><span class="line">        		[root@192 ~]# docker run hello-world</span><br><span class="line">                Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">                <span class="attribute">latest</span><span class="punctuation">:</span> <span class="string">Pulling from library/hello-world</span></span><br><span class="line">                <span class="attribute">c1ec31eb5944</span><span class="punctuation">:</span> <span class="string">Pull complete </span></span><br><span class="line">                <span class="attribute">Digest</span><span class="punctuation">:</span> <span class="string">sha256:1408fec50309afee38f3535383f5b09419e6dc0925bc69891e79d84cc4cdcec6</span></span><br><span class="line">                <span class="attribute">Status</span><span class="punctuation">:</span> <span class="string">Downloaded newer image for hello-world:latest</span></span><br><span class="line"></span><br><span class="line">                <span class="attribute">Hello from Docker!</span></span><br><span class="line"><span class="attribute">                This message shows that your installation appears to be working correctly.</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">                To generate this message, Docker took the following steps</span><span class="punctuation">:</span></span><br><span class="line">                 <span class="attribute">1. The Docker client contacted the Docker daemon.</span></span><br><span class="line"><span class="attribute">                 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span></span><br><span class="line"><span class="attribute">                    (amd64)</span></span><br><span class="line"><span class="attribute">                 3. The Docker daemon created a new container from that image which runs the</span></span><br><span class="line"><span class="attribute">                    executable that produces the output you are currently reading.</span></span><br><span class="line"><span class="attribute">                 4. The Docker daemon streamed that output to the Docker client, which sent it</span></span><br><span class="line"><span class="attribute">                    to your terminal.</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">                To try something more ambitious, you can run an Ubuntu container with</span><span class="punctuation">:</span></span><br><span class="line">                 <span class="attribute">$ docker run -it ubuntu bash</span></span><br><span class="line"><span class="attribute"></span></span><br><span class="line"><span class="attribute">                Share images, automate workflows, and more with a free Docker ID</span><span class="punctuation">:</span></span><br><span class="line">                 https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">                <span class="attribute">For more examples and ideas, visit</span><span class="punctuation">:</span></span><br><span class="line">                 https://docs.docker.com/get-started/</span><br><span class="line"> </span><br><span class="line"><span class="attribute">第十一步</span><span class="punctuation">:</span> <span class="string">设置Docker开机启动</span></span><br><span class="line">	<span class="attribute">命令</span><span class="punctuation">:</span> <span class="string">systemctl enable docker</span></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Centos</tag>
        <tag>Linux</tag>
        <tag>Docker</tag>
        <tag>镜像</tag>
        <tag>Dockerhub</tag>
      </tags>
  </entry>
  <entry>
    <title>Centos操作系统不维护的解决方案</title>
    <url>/2024/08/03/Centos%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%8D%E7%BB%B4%E6%8A%A4%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<figure class="highlight nestedtext"><table><tr><td class="code"><pre><span class="line"><span class="attribute">作者</span><span class="punctuation">:</span> <span class="string">夜泊1990</span></span><br><span class="line"><span class="attribute">企鹅</span><span class="punctuation">:</span> <span class="string">1611756908</span></span><br><span class="line"><span class="attribute">鹅群</span><span class="punctuation">:</span> <span class="string">948233848</span></span><br><span class="line"><span class="attribute">邮箱</span><span class="punctuation">:</span> <span class="string">hd1611756908@163.com</span></span><br><span class="line"><span class="attribute">博客</span><span class="punctuation">:</span> <span class="string">https://hs-an-yue.github.io/</span></span><br><span class="line"><span class="attribute">B 站</span><span class="punctuation">:</span> <span class="string">https://space.bilibili.com/514155929/</span></span><br></pre></td></tr></table></figure>

<h2 id="第一章-Centos介绍"><a href="#第一章-Centos介绍" class="headerlink" title="第一章 Centos介绍"></a>第一章 Centos介绍</h2><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">1</span>. CentOS 是Linux发行版之一，是免费的、开源的、可以重新分发的开源操作系统</span><br><span class="line"><span class="attribute">2</span>. 目前最新版为 Centos8.x 国内市场使用最多的为Centos7.x和Centos6.x </span><br><span class="line"><span class="attribute">3</span>. CentOS7在<span class="number">2024</span>年<span class="number">6</span>月<span class="number">30</span>日停止维护,仓库基本不能在使用,很多命令也不能在使用</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h2 id="第二章-Centos官方不维护解决方案"><a href="#第二章-Centos官方不维护解决方案" class="headerlink" title="第二章 Centos官方不维护解决方案"></a>第二章 Centos官方不维护解决方案</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line">首先就是yum库的问题,由于Centos系统不在维护,yum命令不能使用,所以需要切换yum命令的源</span><br></pre></td></tr></table></figure>

<img src="https://note.youdao.com/yws/api/personal/file/WEB806dd0f8a4871f1c230a131dd72bfbe0?method=download&shareKey=49d7fda391f079da526558ca3a1cbd02">

<hr>
<h4 id="第1步-查看默认仓库的位置"><a href="#第1步-查看默认仓库的位置" class="headerlink" title="第1步 查看默认仓库的位置"></a>第1步 查看默认仓库的位置</h4><img src="https://note.youdao.com/yws/api/personal/file/WEB600bf0a41841ac20a1096e0f8ab0e5a7?method=download&shareKey=c12bca14c2186da0a4b8532507166aca">

<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h4 id="第2步-默认仓库备份"><a href="#第2步-默认仓库备份" class="headerlink" title="第2步 默认仓库备份"></a>第2步 默认仓库备份</h4><img src="https://note.youdao.com/yws/api/personal/file/WEB503ec65799d36459b9aac0a30f24c8c5?method=download&shareKey=2c79b13b51ff7c554c2e38be99f831f8">

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">使用<span class="built_in">mv</span>命令将原仓库 CentOS-Base.repo 备份  </span><br><span class="line"></span><br><span class="line">命令: <span class="built_in">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span><br></pre></td></tr></table></figure>

<h4 id="第3步-下载阿里云仓库"><a href="#第3步-下载阿里云仓库" class="headerlink" title="第3步 下载阿里云仓库"></a>第3步 下载阿里云仓库</h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">下载阿里云镜像仓库命令如下: Centos7</span><br><span class="line">curl -o <span class="regexp">/etc/yum</span>.repos.d<span class="regexp">/CentOS-Base.repo http:/</span><span class="regexp">/mirrors.aliyun.com/</span>repo/Centos-<span class="number">7</span>.repo</span><br></pre></td></tr></table></figure>

<img src="https://note.youdao.com/yws/api/personal/file/WEBb13eb5bb05bc027a08353b9ab2498808?method=download&shareKey=aa50284b5a821dd1909ce43d52f883de">

<h4 id="第4步-清除缓存-生成缓存"><a href="#第4步-清除缓存-生成缓存" class="headerlink" title="第4步 清除缓存&amp;生成缓存"></a>第4步 清除缓存&amp;生成缓存</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">yum clean <span class="keyword">all</span></span><br><span class="line">yum makecache</span><br><span class="line"></span><br><span class="line">通过以上步骤,将原有的默认源配置成了阿里云的国内源. 通过一个安装命令测试一下源是否成功</span><br><span class="line"></span><br><span class="line">安装<span class="keyword">vim</span>编辑器</span><br><span class="line">命令为: yum install <span class="keyword">vim</span></span><br><span class="line">如果安装成功说明阿里云镜像源配置成功</span><br></pre></td></tr></table></figure>

<h2 id="第三章-替代产品"><a href="#第三章-替代产品" class="headerlink" title="第三章 替代产品"></a>第三章 替代产品</h2><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">由于Centos的停止更新，很多习惯使用Centos的用户来说特别的不方便,可以寻找一个替代Centos的Linux的发行版 <span class="built_in">AlmaLinux</span>(阿尔玛),基本上继承了Centos的全部特性,使用上和Centos基本相同,可以作为Centos的替代产品,开源免费的社区版.具体可以自己去查询资料这里了不做详细介绍</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Centos</tag>
        <tag>Linux</tag>
        <tag>AlmaLinux</tag>
      </tags>
  </entry>
</search>
